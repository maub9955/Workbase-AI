{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/apps/web/src/components/my-space.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useState } from \"react\";\n\nconst API_URL = process.env.NEXT_PUBLIC_API_URL ?? \"http://localhost:4000/api\";\n\ntype User = {\n  id: string;\n  email: string;\n  name: string;\n  personalPageId: string;\n};\n\ntype Page = {\n  id: string;\n  title: string;\n  ownerId: string;\n  collaborators: string[];\n  entries: { id: string; authorId: string; content: string; createdAt: string }[];\n};\n\nexport function MySpace() {\n  const [token, setToken] = useState<string | null>(null);\n  const [user, setUser] = useState<User | null>(null);\n  const [page, setPage] = useState<Page | null>(null);\n  const [authMode, setAuthMode] = useState<\"signup\" | \"login\">(\"signup\");\n  const [authForm, setAuthForm] = useState({ name: \"\", email: \"\", password: \"\" });\n  const [entryContent, setEntryContent] = useState(\"\");\n  const [inviteEmail, setInviteEmail] = useState(\"\");\n  const [status, setStatus] = useState<string | null>(null);\n\n  const handleAuthChange = (field: keyof typeof authForm, value: string) => {\n    setAuthForm((prev) => ({ ...prev, [field]: value }));\n  };\n\n  const loadPage = useCallback(\n    async (tokenValue: string) => {\n      const res = await fetch(`${API_URL}/pages/me`, {\n        headers: {\n          \"x-user-token\": tokenValue\n        }\n      });\n\n      if (!res.ok) {\n        throw new Error(\"개인 페이지를 불러오지 못했습니다.\");\n      }\n\n      const data = (await res.json()) as Page;\n      setPage(data);\n    },\n    []\n  );\n\n  const handleSignup = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setStatus(\"회원가입 중...\");\n    try {\n      const res = await fetch(`${API_URL}/auth/signup`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(authForm)\n      });\n\n      if (!res.ok) {\n        const error = await res.json().catch(() => ({ message: \"회원가입에 실패했습니다.\" }));\n        throw new Error(error.message ?? \"회원가입에 실패했습니다.\");\n      }\n\n      const data = await res.json();\n      localStorage.setItem(\"auth_token\", data.token);\n      setToken(data.token);\n      setUser(data.user);\n      setStatus(\"워크스페이스로 이동합니다...\");\n      setTimeout(() => {\n        window.location.href = \"/workspace\";\n      }, 500);\n    } catch (error) {\n      if (error instanceof TypeError && error.message === \"Failed to fetch\") {\n        setStatus(\"API 서버에 연결할 수 없습니다. 서버가 실행 중인지 확인해주세요.\");\n      } else {\n        setStatus(error instanceof Error ? error.message : \"에러가 발생했습니다.\");\n      }\n    }\n  };\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setStatus(\"로그인 중...\");\n    try {\n      const res = await fetch(`${API_URL}/auth/login`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ email: authForm.email, password: authForm.password })\n      });\n\n      if (!res.ok) {\n        const error = await res.json().catch(() => ({ message: \"로그인에 실패했습니다.\" }));\n        throw new Error(error.message ?? \"로그인에 실패했습니다.\");\n      }\n\n      const data = await res.json();\n      localStorage.setItem(\"auth_token\", data.token);\n      setToken(data.token);\n      setUser(data.user);\n      setStatus(\"워크스페이스로 이동합니다...\");\n      setTimeout(() => {\n        window.location.href = \"/workspace\";\n      }, 500);\n    } catch (error) {\n      if (error instanceof TypeError && error.message === \"Failed to fetch\") {\n        setStatus(\"API 서버에 연결할 수 없습니다. 서버가 실행 중인지 확인해주세요.\");\n      } else {\n        setStatus(error instanceof Error ? error.message : \"에러가 발생했습니다.\");\n      }\n    }\n  };\n\n  const handleAddEntry = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!token || !page) return;\n\n    const res = await fetch(`${API_URL}/pages/${page.id}/entries`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-user-token\": token\n      },\n      body: JSON.stringify({ content: entryContent })\n    });\n\n    if (!res.ok) {\n      setStatus(\"글 작성에 실패했습니다.\");\n      return;\n    }\n\n    const newEntry = await res.json();\n    setPage({ ...page, entries: [newEntry, ...page.entries] });\n    setEntryContent(\"\");\n  };\n\n  const handleInvite = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!token || !page) return;\n\n    const res = await fetch(`${API_URL}/pages/${page.id}/collaborators`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-user-token\": token\n      },\n      body: JSON.stringify({ email: inviteEmail })\n    });\n\n    if (res.ok) {\n      setStatus(`${inviteEmail} 님에게 권한을 부여했습니다.`);\n      setInviteEmail(\"\");\n    } else {\n      const error = await res.json().catch(() => ({ message: \"초대에 실패했습니다.\" }));\n      setStatus(error.message ?? \"초대에 실패했습니다.\");\n    }\n  };\n\n  useEffect(() => {\n    setStatus(null);\n  }, [authMode]);\n\n  return (\n    <div className=\"myspace\">\n      <header>\n        <h1>나만의 개인 페이지</h1>\n        <p>회원가입만 하면 즉시 개인 워크스페이스가 생성되고, 동료를 초대해 함께 글을 작성할 수 있어요.</p>\n      </header>\n\n      {!token && (\n        <section className=\"auth-card\">\n          <div className=\"auth-tabs\">\n            <button\n              className={authMode === \"signup\" ? \"active\" : \"\"}\n              onClick={() => setAuthMode(\"signup\")}\n            >\n              회원가입\n            </button>\n            <button className={authMode === \"login\" ? \"active\" : \"\"} onClick={() => setAuthMode(\"login\")}>\n              로그인\n            </button>\n          </div>\n\n          <form onSubmit={authMode === \"signup\" ? handleSignup : handleLogin}>\n            {authMode === \"signup\" && (\n              <label>\n                이름\n                <input\n                  type=\"text\"\n                  value={authForm.name}\n                  onChange={(e) => handleAuthChange(\"name\", e.target.value)}\n                  required\n                />\n              </label>\n            )}\n\n            <label>\n              이메일\n              <input\n                type=\"email\"\n                value={authForm.email}\n                onChange={(e) => handleAuthChange(\"email\", e.target.value)}\n                required\n              />\n            </label>\n\n            <label>\n              비밀번호\n              <input\n                type=\"password\"\n                value={authForm.password}\n                onChange={(e) => handleAuthChange(\"password\", e.target.value)}\n                required\n                minLength={6}\n              />\n            </label>\n\n            <button type=\"submit\" className=\"button primary\">\n              {authMode === \"signup\" ? \"회원가입\" : \"로그인\"}\n            </button>\n          </form>\n        </section>\n      )}\n\n      {status && (\n        <p className=\"status\" style={{ \n          padding: \"0.75rem 1rem\", \n          margin: \"1rem 0\", \n          background: status.includes(\"실패\") || status.includes(\"연결\") ? \"#ffebee\" : \"#e8f5e9\",\n          color: status.includes(\"실패\") || status.includes(\"연결\") ? \"#c62828\" : \"#2e7d32\",\n          borderRadius: \"4px\",\n          border: `1px solid ${status.includes(\"실패\") || status.includes(\"연결\") ? \"#ef5350\" : \"#66bb6a\"}`\n        }}>\n          {status}\n        </p>\n      )}\n\n      {token && user && page && (\n        <section className=\"page-panel\">\n          <div className=\"page-header\">\n            <div>\n              <h2>{page.title}</h2>\n              <p>{user.name}님 전용 공간 · 참여자 {page.collaborators.length}명</p>\n            </div>\n            <div>\n              <a href=\"/workspace\" className=\"button primary\">\n                워크스페이스 열기\n              </a>\n              <button className=\"button secondary\" onClick={() => {\n                localStorage.removeItem(\"auth_token\");\n                setToken(null);\n              }}>\n                로그아웃\n              </button>\n            </div>\n          </div>\n\n          <div className=\"panel-grid\">\n            <article>\n              <h3>새 글 작성</h3>\n              <form onSubmit={handleAddEntry} className=\"entry-form\">\n                <textarea\n                  value={entryContent}\n                  onChange={(e) => setEntryContent(e.target.value)}\n                  placeholder=\"오늘의 업무 메모를 남겨보세요\"\n                  required\n                />\n                <button type=\"submit\" className=\"button primary\">\n                  등록\n                </button>\n              </form>\n            </article>\n\n            <article>\n              <h3>동료 초대</h3>\n              <form onSubmit={handleInvite} className=\"invite-form\">\n                <input\n                  type=\"email\"\n                  value={inviteEmail}\n                  onChange={(e) => setInviteEmail(e.target.value)}\n                  placeholder=\"이메일을 입력하세요\"\n                  required\n                />\n                <button type=\"submit\" className=\"button secondary\">\n                  권한 부여\n                </button>\n              </form>\n              <p className=\"helper\">동료가 아직 계정이 없으면 먼저 회원가입을 안내해주세요.</p>\n            </article>\n          </div>\n\n          <article>\n            <h3>최근 글</h3>\n            <ul className=\"entries\">\n              {page.entries.map((entry) => (\n                <li key={entry.id}>\n                  <p>{entry.content}</p>\n                  <span>{new Date(entry.createdAt).toLocaleString()}</span>\n                </li>\n              ))}\n            </ul>\n          </article>\n        </section>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 554, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 562, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/next/src/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["unable to read source [project]/node_modules/next/src/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,yIAAiCC,QAAQ,CACxD,YACD,CAACC,kBAAkB"}},
    {"offset": {"line": 564, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}